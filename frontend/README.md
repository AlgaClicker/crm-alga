# Проект на Vue.js

Этот проект представляет собой веб-приложение, разработанное с использованием Vue.js. Приложение предоставляет функционал для управления заявками, спецификациями и ресурсами для строительных проектов.

## Содержание
- [Технологии](#технологии)
- [Установка и запуск](#установка-и-запуск)
- [Структура проекта](#структура-проекта)
- [Роли в системе](#роли-в-системе)
- [Описание ключевых модулей](#описание-ключевых-модулей)
- [Справочники](#справочники)
- [Типы заявок](#типы-заявок)
- [Оптимизация и рекомендации](#оптимизация-и-рекомендации)
- [Контрибьютинг](#контрибьютинг)

## Технологии
- **Vue.js**: Основной фреймворк для разработки интерфейсов пользователя.
- **Vue Router**: Используется для маршрутизации между страницами.
- **Vuex/Pinia** (если внедрено): Для централизованного управления состоянием.
- **Axios**: Для взаимодействия с REST API.
- **Vuetify/Element UI** (опционально): Для обеспечения визуальной консистентности и единообразного внешнего вида приложения.
- **SCSS**: Для организации и кастомизации стилей.

## Установка и запуск

### Клонирование репозитория
```
git clone <URL-репозитория>
cd <название-папки>
```

### Установка зависимостей
Убедитесь, что у вас установлен Node.js. Затем выполните следующую команду для установки зависимостей:
```
npm install
```

### Запуск приложения
Для запуска приложения в режиме разработки используйте команду:
```
npm run serve
```

Приложение будет доступно по адресу `http://localhost:8080`.

### Сборка для продакшн
Для сборки проекта для продакшн выполните команду:
```
npm run build
```

## Структура проекта

```
├── src
│   ├── components
│   │   ├── directory
│   │   └── ...
│   ├── views
│   │   ├── upravlenie
│   │   ├── supply
│   │   └── ...
│   ├── store
│   ├── router
│   ├── services
│   ├── mixins
│   └── utils
├── public
└── ...
```

- **components**: Содержит переиспользуемые компоненты, такие как модальные окна, таблицы, карточки и формы.
- **views**: Представления страниц приложения, каждая из которых объединяет компоненты для реализации бизнес-логики.
- **store**: Модуль для централизованного управления состоянием (Vuex/Pinia).
- **router**: Определение маршрутов для перехода между страницами.
- **services**: Методы для взаимодействия с API, например, для работы с файлами или авторизацией.
- **mixins**: Переиспользуемые функции, используемые в нескольких компонентах.
- **utils**: Содержит вспомогательные функции, валидаторы и настройки маршрутов.

## Роли в системе

Проект поддерживает несколько ролей пользователей, каждая из которых обладает своими функциями и правами:
- **Управление**: Полный контроль над системой, управление спецификациями, заявками и сотрудниками.
- **Мастер**: Создание заявок на материалы, управление бригадами и задачами.
- **Снабжение**: Обработка заявок мастеров, создание счетов и управление поставками.

## Описание ключевых модулей

### Main.js
- В файле `main.js` инициализируется экземпляр Vue, импортируются все библиотеки и регистрируются компоненты. Также здесь регистрируются фильтры, чтобы упростить их использование в приложении.

### App.vue
- `App.vue` является корневым компонентом, который содержит базовую структуру приложения. В него входят компоненты уведомлений (`notifications`), базовые модальные окна (`base-delete-modal`) и другие глобальные элементы интерфейса. Также здесь происходит инициализация сокетов и управление изменением размеров экрана.

### Компоненты
- **Переиспользуемые компоненты** находятся в папке `components`. Каждый компонент включает шаблон (template), логику (script) и стили (style). Например:
    - **BaseAccount**: Компонент для отображения информации о пользователе.
    - **BaseButtonLoading**: Кнопка с индикатором загрузки, используется для отображения процесса выполнения операции.
    - **BaseButtonSave**: Кнопка для сохранения, меняет состояние в зависимости от валидности формы.
- **Директории компонентов** организованы по функциональности, например, компоненты для управления заявками, материалами и контрагентами находятся в `components/directory`.

### Стили
- Для стилей используется SCSS, что упрощает их организацию и структурирование. Основные стили содержатся в файлах `style.scss` и `_variables.scss`, где `_variables.scss` используется для хранения переменных, а `style.scss` для подключения всех стилей проекта.
- В файле `_components.scss` находятся стили для компонентов, однако каждый компонент также может иметь свои собственные стили, что обеспечивает гибкость.
- Стили для каждой страницы импортируются в файле `layout.scss` для упрощения их поддержки и организации.

### Иконки
- Проект поддерживает два способа работы с иконками. Основной способ — использование компонента `BaseIcon`, который принимает название и размер иконки и отображает нужный SVG. Альтернативный способ — использование `sprite.svg` для работы со старыми методами, когда компонент `BaseIcon` недоступен.

### Роутинг
- Все маршруты определяются в файле `router/index.js`. Здесь содержатся навигационные хуки, редиректы и импорт маршрутов для каждой роли.
- Общие маршруты, используемые несколькими ролями, записаны в файле `router/common.js`. Навбар отрисовывается динамически на основе маршрутов, доступных для роли пользователя.
- Маршруты для каждой роли содержат дочерние маршруты и могут иметь свои уникальные страницы, что позволяет гибко настраивать доступ.

### Сервисы
- В папке `services` находятся методы для взаимодействия с API, такие как `files.service.js` для работы с файлами и `httpRequest.service.js` для REST-запросов. Также есть сервис для работы с сокетами (`sockets.service.js`), который используется для обновления данных в реальном времени.
- **HTTP-запросы** реализованы с использованием экземпляра Axios, созданного в `instances.service.js`, что позволяет настраивать общие параметры для всех запросов.

### Миксины
- Миксины позволяют переиспользовать логику между компонентами. Например, миксин для загрузки файлов (`files.mixins.js`) предоставляет функцию, которую можно использовать в нескольких компонентах.
- **Пример использования**: Миксин для валидации форм можно использовать в различных формах для проверки корректности данных перед отправкой.

### Валидация
- Для валидации данных используется библиотека Vulidate. Валидация конфигурируется на уровне компонентов, где каждое поле связывается с необходимыми валидаторами, а также поддерживаются кастомные валидаторы, расположенные в папке `utils/customValidations.js`.
- **Атрибуты валидации**: `state` для управления состоянием компонента, `:class` для стилизации полей в зависимости от состояния валидации. Можно также использовать кастомные валидаторы для специфичных требований проекта.

### Пагинация и фильтры
- **PagginateTable**: Компонент для пагинации таблиц, позволяет разбивать данные на страницы и улучшает производительность при работе с большими наборами данных.
- **Фильтры**: В проекте есть несколько фильтров, таких как `FilterDate`, `FilterInvoice`, `FilterPayment`, `FilterRequisition`. Фильтры принимают мутации и геттеры для обработки данных, улучшая интерфейс пользователя и делая взаимодействие с данными более удобным.

## Справочники

Система управления бизнесом "Алга" включает следующие справочники:
- **Аккаунты**: Хранит информацию об учетных записях организаций, участвующих в бизнес-процессах. Включает данные о логине, электронной почте и роли пользователя.
- **Сотрудники**: Содержит информацию о сотрудниках, включая ФИО, должности и связь с аккаунтом организации.
- **Материалы**: Справочник материалов с иерархической структурой. Включает информацию о материалах и их свойствах, необходимых для выполнения работ по заявкам.
- **Контрагенты (Партнеры)**: Справочник организаций и юридических лиц, с которыми взаимодействует компания. Содержит данные о поставщиках, заказчиках и других партнерах.
- **Бригады**: Список сформированных бригад из сотрудников, управляемых мастером, который распределяет работы и задачи.

## Типы заявок

### 1. Заявка по спецификации
Заявка по спецификации создается на основе заранее утвержденного списка материалов и характеристик. Этот тип заявки используется для типовых работ, где уже утверждены материалы и их количество.

**Особенности заявки по спецификации**:
- **Структурированность**: Материалы выбираются из утвержденного списка, что снижает вероятность ошибок.
- **Согласованность**: Все материалы и объемы уже согласованы перед созданием заявки.
- **Автоматизация**: Информация подставляется автоматически, что ускоряет процесс создания заявки.
- **Применение**: Используется для типовых проектов, где материалы и задачи часто повторяются.

**Процесс создания**:
1. Мастер выбирает нужную спецификацию для проекта.
2. Вся информация о материалах подставляется из спецификации автоматически.
3. Мастер может скорректировать количество, если это разрешено, и отправить заявку на выполнение.

### 2. Универсальная заявка
Универсальная заявка создается с нуля и позволяет мастеру запросить любые материалы, не ограничиваясь утвержденной спецификацией. Этот тип заявки подходит для нерегулярных, нестандартных задач.

**Особенности универсальной заявки**:
- **Гибкость**: Мастер вручную вводит все данные о материалах, их количестве и характеристиках.
- **Индивидуальные запросы**: Используется для нестандартных или разовых задач, когда материалы или услуги не входят в типовую спецификацию.
- **Ручной ввод**: Все данные вводятся вручную, что позволяет учесть специфические потребности, но может занимать больше времени.

**Процесс создания**:
1. Мастер вручную заполняет заявку, вводя данные о необходимых материалах.
2. Может прикрепить дополнительные документы или комментарии.
3. После отправки заявка проходит процесс проверки и согласования.

**Основные отличия между типами заявок**:
| Характеристика          | Заявка по спецификации        | Универсальная заявка            |
|-------------------------|-------------------------------|---------------------------------|
| **Основание**           | Предопределенная спецификация | Свободная форма, материалы вручную |
| **Автоматизация**       | Данные подставляются автоматически | Все данные вводятся вручную     |
| **Гибкость**            | Ограничена утвержденной спецификацией | Полная свобода выбора материалов |
| **Применение**          | Типовые задачи                | Нестандартные и разовые запросы |
| **Скорость оформления** | Быстрое, автоматическое       | Зависит от сложности и объема   |
| **Необходимость согласования** | Обычно уже согласовано       | Требует дополнительного согласования |

## Оптимизация и рекомендации

- **Разделение крупных компонентов**: Следует разбить крупные компоненты на более мелкие для улучшения читаемости.
- **Lazy-loading**: Реализуйте ленивую загрузку маршрутов для ускорения начальной загрузки.
- **Виртуализация списков**: Используйте `vue-virtual-scroller` для оптимизации работы с большими таблицами.
- **Кеширование данных**: Используйте Vuex/Pinia для кеширования данных, которые часто используются, чтобы минимизировать количество запросов к API.

## Контрибьютинг
1. Форкните репозиторий.
2. Создайте свою ветку: `git checkout -b feature/my-feature`.
3. Сделайте изменения и закоммитьте их: `git commit -m 'Добавил новую функцию'`.
4. Отправьте изменения на GitHub: `git push origin feature/my-feature`.
5. Создайте Pull Request.

